<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title></title>
    <!-- RWD -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- MS -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8,IE=EmulateIE9" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
      integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
  </head>
  <body>
    <!-- <input type="text" onkeydown="checkNum(event)" /> -->
    onkeyup 이벤트 : <input type="text" onkeyup="checkNum(event)" /><br />
    <!-- onkeyup은 키를 눌렀다 뗏을 때 이벤트가 생성-->

    oninput 이벤트 : <input type="text" oninput="removeChar(event)" /><br />
    <!-- oninput은 값이 입력 될때 이벤트 발생 -->

    <!-- 실수 :<input type="text" onkeydown="checkFloat(event,this.value)" /> -->
    실수2 : <input type="text" onkeyup="checkFloat2(event,this.value)" />
    <!-- number 타입 : <input type="number" /> -->
  </body>

  <script>
    function removeChar(e) {
      e.target.value = e.target.value.replace(/[^0-9]/g, "");
    }

    function checkNum(event) {
      let regExp = /[^0-9]/g;
      var keyValue = event.key;

      console.log(keyValue);

      if ((keyValue >= 0 && keyValue < 10) || keyValue == "Backspace") {
        return;
      } else if (regExp.test(keyValue)) {
        //regExp 패턴에 keyValue가 만족하면 true, 아니면 false

        //event target : 이벤트가 발생한 대상
        // event.target.value = event.target.value.replace(regExp, "");
        event.target.value = "";

        //event.preventDefault();
      }
    }
    // function checkFloat(event, thisValue) {
    //   var keyValue = event.key;
    //   if ((keyValue >= 0 && keyValue < 10) || keyValue == "Backspace") {
    //     console.log("thisvalue :" + thisValue);
    //     return;
    //   } else if (keyValue == ".") {
    //     // 첫자리에 . 입력 되는 것을 막기위해
    //     if (thisValue == "") event.preventDefault();
    //     else if (thisValue.indexOf(".") == -1)
    //       //thisValue에 .이 없으면 .을 입력 받는다.
    //       return;
    //     else {
    //       //thisValue가 ''이 아니고 thisValue가 .을 포함 했을 경우의 조건
    //       //즉 .이 두번입력되는 것을 막기위한 조건
    //       event.preventDefault();
    //     }
    //   } else {
    //     event.preventDefault();
    //   }
    // }
    function checkFloat2(event, thisValue) {
      let regExp = /[^0-9]/g;
      let input = event.target;

      var keyValue = event.key;

      if ((keyValue >= 0 && keyValue < 10) || keyValue == "Backspace") {
        console.log("thisvalue :" + thisValue);
        return;
      } else if (keyValue == ".") {
        if (thisValue == ".") {
          input.value = "";
          return;
          //thisValue.slice(0,-1)은 0인덱스부터 마지막 인덱스 전까지 잘라낸 문자열
          //.이 입력된 후 .을 제거한 문자열에 문자열에 .이 포함되어 있지 않으면
          //.을 입력하도록 하는 조건
        } else if (thisValue.slice(0, -1).indexOf(".") == -1) {
          console.log("thisValue2 : " + thisValue);
          return;
        } else {
          input.value = input.value.slice(0, -1);
        }
      } else if (regExp.test(keyValue)) {
        input.value = input.value.replace(regExp, "");
      }
    }

    // function checkNum(event) {
    //   //   var e = window.event;

    //   var keyValue = event.key;
    //   var keyCode = event.keyCode; //키의 고유값 jquery에서는 event.which
    //   console.log(keyValue);
    //   if ((keyValue >= 0 && keyValue < 10) || keyValue == "Backspace") {
    //     return;
    //   } else {
    //     //input 요소의 기본 동작은 입력
    //     //preventDefault(): input요소의 기본동작을 막겠다는 의미
    //     //즉 숫자가 아닌 다른 키 값은 입력이 안되도록 한다는 의미
    //     event.preventDefault();
    //   }
    // }
  </script>
</html>
